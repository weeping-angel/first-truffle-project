# Truffle

Truffle is a framework that is used for the development, deployment and testing of the smart contracts.

It is used for for their:

    - Compilation
    - Deployment
    - Testing

## Installtion

To install the truffle suite, NodeJS must me installed on the system.

Run the following command to install the truffle globally:

```console
npm install -g truffle
```

To check whether it's installed successfully or not, check its version:

```console
truffle version
```

## First Project

To initialize a project, run:

```console
truffle init
```

This will create the following directory structure:

```
.
├── contracts
│   └── Migrations.sol
├── migrations
│   └── 1_initial_migration.js
├── test
└── truffle-config.js
```

1. `contracts`: Folder where we will write contracts in solidity files. By default, it contains `Migrations.sol` file generated by the truffle.

2. `migrations`: Folder where we'll write the deployment scripts and other migration stuff (usually in .js files). As the convention, filename must start with a number, so the migrations can be done orderly.

3. `test`: Folder where we'll write the testcases for the smart contract(s). These can we written in solidity and javascript (usually).

4. `truffle-config.js`: File which contains all the configurations such as chain details, export details, private key, etc ...

## Compilation

Once you've written your code in `contracts` folder, you can run the following command to create artifacts in the `build` folder (generated automatically).

```console
truffle compile
```

```
build
└── contracts
    └── <json_files>
```

## Develop & Deploy

To start the local built-in development chain, Ganache:
```console
truffle develop

> migrate --reset
```

For deploying to the public testnet or mainnet:

```console
truffle migrate --reset --network <network>
```

## Interacting with the contract

```console
$ truffle console --network <network>

> contract = await ContractName.deployed()

> contract.address
```

## Testing

```console
truffle test
```